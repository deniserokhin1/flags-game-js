(()=>{"use strict";var e,t=["Непал","Центральноафриканская Республика","Шпицберген и Ян-Майен","Острова Святой Елены, Вознесения и Тристан-да-Кунья","Сен-Мартен","Остров Буве","Французские Южные и Антарктические территории","Остров Херд и острова Макдональд","Британская территория в Индийском океане","Британские Виргинские острова","Южная Георгия и Южные Сандвичевы острова","Уоллис и Футуна","Французская Полинезия","Антарктида"],n=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function c(e){try{o(r.next(e))}catch(e){s(e)}}function i(e){try{o(r.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,i)}o((r=r.apply(e,t||[])).next())}))},r=function(e,t){var n,r,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return c.label++,{value:s[1],done:!1};case 5:c.label++,r=s[1],s=[0];continue;case 7:s=c.ops.pop(),c.trys.pop();continue;default:if(!((a=(a=c.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){c=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){c.label=s[1];break}if(6===s[0]&&c.label<a[1]){c.label=a[1],a=s;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(s);break}a[2]&&c.ops.pop(),c.trys.pop();continue}s=t.call(e,c)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},a=0,s=[],c=document.querySelector(".wrapper"),i=document.querySelector(".btn-start"),o=document.querySelector(".result"),d=document.querySelector(".controls-container"),l=document.querySelector(".draggable-objects"),u=document.querySelector(".drop-points"),v=document.querySelector(".form-range"),f=document.querySelector(".count-flags"),h=document.querySelector(".btn-game"),m=document.querySelector(".input-wrapper"),p=document.querySelector(".container-div"),L=document.querySelector(".title"),g=document.querySelector(".btn-again"),y=document.querySelector(".btn-game-over"),b=document.querySelector(".spinner_V8m1"),E=Number(v.value);function w(e,t){return n(this,void 0,void 0,(function(){var n;return r(this,(function(r){switch(r.label){case 0:return[4,fetch(t.flagUrl)];case 1:return[4,r.sent().url];case 2:return n=r.sent(),e.innerHTML='<img src="'.concat(n,'" id="').concat(t.code,'" data-url="').concat(n,'">'),[2]}}))}))}var S=0,q=0,x={},T=!1,C=function(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}},M=function(){x={},d.classList.add("hide"),i.classList.add("hide"),m.classList.remove("hide"),L.textContent="Перетащи флаг на страну",g.classList.add("hide"),p.classList.remove("container-div-win"),p.classList.add("hide"),l.classList.remove("hide")},k=function(){x={},p.classList.add("hide"),d.classList.remove("hide"),i.classList.remove("hide"),y.classList.add("hide"),l.classList.remove("hide"),L.textContent="Перетащи флаг на страну",g.classList.add("hide"),o.textContent=""};function H(e){C()?(S=e.touches[0].clientX,q=e.touches[0].clientY,T=!0,x=e.target):e.dataTransfer.setData("text",e.target.id)}function A(e){e.preventDefault(),e.target.classList.add("over")}var D=function(e){e.preventDefault(),e.target.classList.remove("over")},j=function(e){if(T){e.preventDefault();var t=e.touches[0].clientX,n=e.touches[0].clientY,r=document.getElementById(e.target.id);r.parentElement.style.top=r.parentElement.offsetTop-(q-n)+"px",r.parentElement.style.left=r.parentElement.offsetLeft-(S-t)+"px",S=t,q=n}},B=function(e){var t=e.target;if(e.preventDefault(),C()){T=!1;var n=document.querySelector("div[data-id='".concat(t.id,"']")),r=n.getBoundingClientRect();S>=r.left&&S<=r.right&&q>=r.top&&q<=r.bottom&&(n.classList.add("dropped"),x.classList.add("hide"),n.innerHTML="",n.insertAdjacentHTML("afterbegin",'<img src= "'.concat(x.id,'.png">')),a+=1)}else{var s=e.dataTransfer.getData("text"),c=t.getAttribute("data-id"),i=document.createElement("div");if(i.classList.add("name-country"),i.textContent=t.dataset.name,s===c){var d=document.getElementById(s);t.closest(".flag-div").appendChild(i),t.classList.add("dropped"),d.classList.add("hide");var u=d.closest(".draggable-image");u.setAttribute("draggable","false"),u.style.cursor="default",t.innerHTML="",t.insertAdjacentHTML("afterbegin",'<img src="'.concat(d.dataset.url,'">')),t.classList.remove("over"),t.removeEventListener("dragover",A),a+=1}else t.classList.remove("over"),t.classList.add("error"),setTimeout((function(){t.classList.remove("error")}),300)}a==E&&(o.innerText="Вы победили!",l.classList.add("hide"),p.classList.add("container-div-win"),L.textContent="Вы победили!",g.classList.remove("hide"),g.addEventListener("click",M))};i.addEventListener("click",(function(){return n(void 0,void 0,void 0,(function(){return r(this,(function(e){return x={},v.addEventListener("input",I),d.classList.add("hide"),i.classList.add("hide"),m.classList.remove("hide"),[2]}))}))}));var I=function(e){f.textContent=e.target.value,E=e.target.value};function U(){return n(this,void 0,void 0,(function(){var e,a,i;return r(this,(function(o){switch(o.label){case 0:return m.classList.add("hide"),c.classList.add("wrapper100vh"),b.classList.remove("hide"),[4,fetch("https://restcountries.com/v3.1/all")];case 1:return[4,o.sent().json()];case 2:for(e=o.sent(),a=0;a<e.length;a++)i=e[a].translations.rus.common,t.includes(i)||s.push({nameCountry:e[a].translations.rus.common,flagUrl:e[a].flags.png,code:e[a].cca2});return[4,n(void 0,void 0,void 0,(function(){var e,t,n,a,c,i,o,d,v,f;return r(this,(function(r){switch(r.label){case 0:for(l.innerHTML="",u.innerHTML="",e=[],t=[],v=1;v<=E;v++)n=Math.floor(Math.random()*s.length),e.includes(n)?v-=1:(e.push(n),t.push(s[n]));a=0,c=t,r.label=1;case 1:return a<c.length?(v=c[a],(i=document.createElement("div")).classList.add("draggable-image"),i.setAttribute("draggable","true"),C()&&(i.style.position="absolute"),[4,w(i,v)]):[3,4];case 2:r.sent(),l.appendChild(i),r.label=3;case 3:return a++,[3,1];case 4:for(t=t.sort((function(){return.5-Math.random()})),o=0,d=t;o<d.length;o++)v=d[o],(f=document.createElement("div")).classList.add("flag-div"),f.innerHTML="<div class='countries' data-id='".concat(v.code,"' data-name='").concat(v.nameCountry,"'>\n    ").concat(v.nameCountry,"\n    </div>\n    "),u.appendChild(f);return s.length=0,[2]}}))}))];case 3:return o.sent(),c.classList.remove("wrapper100vh"),b.classList.add("hide"),y.classList.remove("hide"),y.addEventListener("click",k),p.classList.remove("hide"),[2]}}))}))}h.addEventListener("click",(function(){return n(void 0,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,U()];case 1:return t.sent(),a=0,e=document.querySelectorAll(".countries"),document.querySelectorAll(".draggable-image").forEach((function(e){e.addEventListener("dragstart",H),e.addEventListener("touchstart",H),e.addEventListener("touchend",B),e.addEventListener("touchmove",j)})),e.forEach((function(e){e.addEventListener("dragover",A),e.addEventListener("dragleave",D),e.addEventListener("drop",B)})),[2]}}))}))}))})();