(()=>{"use strict";var e,t=["belgium","bhutan","brazil","china","cuba","ecuador","georgia","germany","hong-kong","india","iran","myanmar","norway","spain","sri-lanka","sweden","switzerland","united-states","uruguay","wales"],n=document.querySelector(".btn-start"),r=document.querySelector(".result"),a=document.querySelector(".controls-container"),o=document.querySelector(".draggable-objects"),i=document.querySelector(".drop-points"),c=0,l=0,s={},d=!1,u=function(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}},f=0;function g(e){u()?(c=e.touches[0].clientX,l=e.touches[0].clientY,d=!0,s=e.target):(console.log(e),e.dataTransfer.setData("text",e.target.id))}function p(e){e.preventDefault()}var h=function(e){if(d){e.preventDefault();var t=e.touches[0].clientX,n=e.touches[0].clientY,r=document.getElementById(e.target.id);r.parentElement.style.top=r.parentElement.offsetTop-(l-n)+"px",r.parentElement.style.left=r.parentElement.offsetLeft-(c-t)+"px",c=t,l=n}},v=function(e){if(e.preventDefault(),u()){d=!1;var t=document.querySelector("div[data-id='".concat(e.target.id,"']")),o=t.getBoundingClientRect();c>=o.left&&c<=o.right&&l>=o.top&&l<=o.bottom&&(t.classList.add("dropped"),s.classList.add("hide"),t.innerHTML="",t.insertAdjacentHTML("afterbegin",'<img src= "'.concat(s.id,'.png">')),f+=1)}else{var i=e.dataTransfer.getData("text");if(i===e.target.getAttribute("data-id")){var g=document.getElementById(i);e.target.classList.add("dropped"),g.classList.add("hide"),g.setAttribute("draggable","false"),e.target.innerHTML="",e.target.insertAdjacentHTML("afterbegin",'<img src="'.concat(i,'.png">')),f+=1}}3==f&&(r.innerText="Вы победили!",a.classList.remove("hide"),n.classList.remove("hide"))},m=function(){o.innerHTML="",i.innerHTML="";for(var e=[],n=1;n<=3;n++){var r=t[Math.floor(Math.random()*t.length)];e.includes(r)?n-=1:e.push(r)}for(var a=0,c=e;a<c.length;a++){n=c[a];var l=document.createElement("div");l.classList.add("draggable-image"),l.setAttribute("draggable","true"),u()&&(l.style.position="absolute"),l.innerHTML='<img src="content/'.concat(n,'.png" id="').concat(n,'">'),o.appendChild(l)}for(var s=0,d=e=e.sort((function(){return.5-Math.random()}));s<d.length;s++){n=d[s];var f=document.createElement("div");f.innerHTML="<div class='countries' data-id='".concat(n,"'>\n    ").concat(n.charAt(0).toUpperCase()+n.slice(1).replace("-"," "),"\n    </div>\n    "),i.appendChild(f)}};n.addEventListener("click",(function(){return t=void 0,r=void 0,i=function(){return function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(t){switch(t.label){case 0:return s={},a.classList.add("hide"),n.classList.add("hide"),[4,m()];case 1:return t.sent(),f=0,e=document.querySelectorAll(".countries"),document.querySelectorAll(".draggable-image").forEach((function(e){e.addEventListener("dragstart",g),e.addEventListener("touchstart",g),e.addEventListener("touchend",v),e.addEventListener("touchmove",h)})),e.forEach((function(e){e.addEventListener("dragover",p),e.addEventListener("drop",v)})),[2]}}))},new((o=void 0)||(o=Promise))((function(e,n){function a(e){try{l(i.next(e))}catch(e){n(e)}}function c(e){try{l(i.throw(e))}catch(e){n(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,c)}l((i=i.apply(t,r||[])).next())}));var t,r,o,i}))})();