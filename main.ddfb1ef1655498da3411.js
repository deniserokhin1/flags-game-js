(()=>{"use strict";var e,t,n=["Непал","Центральноафриканская Республика","Шпицберген и Ян-Майен","Острова Святой Елены, Вознесения и Тристан-да-Кунья","Сен-Мартен","Остров Буве","Французские Южные и Антарктические территории","Остров Херд и острова Макдональд","Британская территория в Индийском океане","Британские Виргинские острова","Южная Георгия и Южные Сандвичевы острова","Уоллис и Футуна","Французская Полинезия","Антарктида"],r=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{o(r.next(e))}catch(e){s(e)}}function c(e){try{o(r.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}o((r=r.apply(e,t||[])).next())}))},a=function(e,t){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},s=0,i=!0,c=[],o=document.querySelector(".wrapper"),d=document.querySelector(".spinner_V8m1"),l=document.querySelector(".btn-start"),u=document.querySelector(".result"),v=document.querySelector(".controls-container"),f=document.querySelector(".draggable-objects"),m=document.querySelector(".drop-points"),h=document.querySelector(".form-range"),L=document.querySelector(".count-flags"),p=document.querySelector(".btn-game"),g=document.querySelector(".input-wrapper"),y=document.querySelector(".container-div"),b=document.querySelector(".title"),E=document.querySelector(".btn-again"),w=document.querySelector(".btn-game-over"),S=Number(h.value),q=0,x=0,T={},C=!1,M=function(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}},k=function(){T={},v.classList.add("hide"),l.classList.add("hide"),g.classList.remove("hide"),b.textContent="Перетащи флаг на страну",E.classList.add("hide"),y.classList.remove("container-div-win"),y.classList.add("hide"),f.classList.remove("hide")},H=function(){T={},y.classList.add("hide"),v.classList.remove("hide"),l.classList.remove("hide"),w.classList.add("hide"),f.classList.remove("hide"),b.textContent="Перетащи флаг на страну",E.classList.add("hide"),u.textContent=""};function A(e){M()?(q=e.touches[0].clientX,x=e.touches[0].clientY,C=!0,T=e.target):e.dataTransfer.setData("text",e.target.id)}function D(e){e.preventDefault(),e.target.classList.add("over")}var j=function(e){e.preventDefault(),e.target.classList.remove("over")},B=function(e){if(C){e.preventDefault();var t=e.touches[0].clientX,n=e.touches[0].clientY,r=document.getElementById(e.target.id);r.parentElement.style.top=r.parentElement.offsetTop-(x-n)+"px",r.parentElement.style.left=r.parentElement.offsetLeft-(q-t)+"px",q=t,x=n}},U=function(e){var t=e.target;if(e.preventDefault(),M()){C=!1;var n=document.querySelector("div[data-id='".concat(t.id,"']")),r=n.getBoundingClientRect();q>=r.left&&q<=r.right&&x>=r.top&&x<=r.bottom&&(n.classList.add("dropped"),T.classList.add("hide"),n.innerHTML="",n.insertAdjacentHTML("afterbegin",'<img src= "'.concat(T.id,'.png">')),s+=1)}else{var a=e.dataTransfer.getData("text"),i=t.getAttribute("data-id"),c=document.createElement("div");if(c.classList.add("name-country"),c.textContent=t.dataset.name,a===i){var o=document.getElementById(a);t.closest(".flag-div").appendChild(c),t.classList.add("dropped"),o.classList.add("hide");var d=o.closest(".draggable-image");d.setAttribute("draggable","false"),d.style.cursor="default",t.innerHTML="",t.insertAdjacentHTML("afterbegin",'<img src="'.concat(o.dataset.url,'">')),t.classList.remove("over"),t.removeEventListener("dragover",D),s+=1}else t.classList.remove("over"),t.classList.add("error"),setTimeout((function(){t.classList.remove("error")}),300)}s==S&&(u.innerText="Вы победили!",f.classList.add("hide"),y.classList.add("container-div-win"),b.textContent="Вы победили!",E.classList.remove("hide"),E.addEventListener("click",k))},I=function(){f.innerHTML="",m.innerHTML="";for(var e,t=[],n=[],r=1;r<=S;r++){var a=Math.floor(Math.random()*c.length);t.includes(a)?r-=1:(t.push(a),n.push(c[a]))}for(var s=0,o=n;s<o.length;s++){r=o[s];var d=document.createElement("div");d.classList.add("draggable-image"),d.setAttribute("draggable","true"),M()&&(d.style.position="absolute"),e=r,d.innerHTML='<img src="'.concat(e.flagUrl,'" id="').concat(e.code,'" data-url="').concat(e.flagUrl,'">'),f.appendChild(d)}for(var l=0,u=n=n.sort((function(){return.5-Math.random()}));l<u.length;l++){r=u[l];var v=document.createElement("div");v.classList.add("flag-div"),v.innerHTML="<div class='countries' data-id='".concat(r.code,"' data-name='").concat(r.nameCountry,"'>\n    ").concat(r.nameCountry,"\n    </div>\n    "),m.appendChild(v)}i=!1};l.addEventListener("click",(function(){return r(void 0,void 0,void 0,(function(){return a(this,(function(e){return T={},v.classList.add("hide"),l.classList.add("hide"),g.classList.remove("hide"),[2]}))}))}));var X=function(e){L.textContent=e.target.value,S=e.target.value};function Y(){return r(this,void 0,void 0,(function(){var e,t,r;return a(this,(function(a){switch(a.label){case 0:return g.classList.add("hide"),o.classList.add("wrapper100vh"),d.classList.remove("hide"),[4,fetch("https://restcountries.com/v3.1/all")];case 1:return[4,a.sent().json()];case 2:for(e=a.sent(),t=0;t<e.length;t++)r=e[t].translations.rus.common,n.includes(r)||c.push({nameCountry:e[t].translations.rus.common,flagUrl:e[t].flags.png,code:e[t].cca2});return[4,I()];case 3:return a.sent(),o.classList.remove("wrapper100vh"),d.classList.add("hide"),w.classList.remove("hide"),w.addEventListener("click",H),y.classList.remove("hide"),[2]}}))}))}p.addEventListener("click",(function(){return r(void 0,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return i?[4,Y()]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,G()];case 3:n.sent(),n.label=4;case 4:return s=0,t=document.querySelectorAll(".countries"),e=document.querySelectorAll(".draggable-image"),h.addEventListener("input",X),e.forEach((function(e){e.addEventListener("dragstart",A),e.addEventListener("touchstart",A),e.addEventListener("touchend",U),e.addEventListener("touchmove",B)})),t.forEach((function(e){e.addEventListener("dragover",D),e.addEventListener("dragleave",j),e.addEventListener("drop",U)})),[2]}}))}))}));var G=function(){return r(void 0,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,I()];case 1:return e.sent(),g.classList.add("hide"),o.classList.remove("wrapper100vh"),d.classList.add("hide"),w.classList.remove("hide"),w.addEventListener("click",H),y.classList.remove("hide"),[2]}}))}))}})();